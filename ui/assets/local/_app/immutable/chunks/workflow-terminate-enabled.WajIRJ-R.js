import{s as N,M as g,T as k,h as T,t as y,j as D,k as E,l as C,f as w,m as I,i as A,n as b,v as M,a8 as V,w as z,b as Q,d as U}from"./scheduler.pPC3woXQ.js";import{S as B,i as F,f as W,c as v,a as P,m as R,t as S,b as j,d as q}from"./index.Z3Qqxacm.js";import{M as G}from"./modal.TcRT4NOF.js";import{t as h}from"./translate.HrioCK44.js";import{c as X,t as Y}from"./workflows.s9Ou474G.js";import{t as J}from"./toaster.pceGNaxq.js";import{i as K}from"./is-network-error.8f5XuXSS.js";import{I as Z}from"./input.T-q3Sv8I.js";function x(t){let e,o=h("workflows.cancel-modal-title")+"",a;return{c(){e=T("h3"),a=y(o),this.h()},l(r){e=D(r,"H3",{slot:!0});var l=E(e);a=C(l,o),l.forEach(w),this.h()},h(){I(e,"slot","title")},m(r,l){A(r,e,l),b(e,a)},p:M,d(r){r&&w(e)}}}function $(t){let e,o=h("workflows.cancel-modal-confirmation")+"",a;return{c(){e=T("p"),a=y(o)},l(r){e=D(r,"P",{});var l=E(e);a=C(l,o),l.forEach(w)},m(r,l){A(r,e,l),b(e,a)},p:M,d(r){r&&w(e)}}}function ee(t){let e,o,a,r;function l(n){t[7](n)}function i(n){t[8](n)}let m={id:"cancel-confirmation-modal","data-testid":"cancel-confirmation-modal",confirmText:h("common.confirm"),cancelText:h("common.cancel"),loading:t[2],confirmType:"destructive",$$slots:{content:[$],title:[x]},$$scope:{ctx:t}};return t[3]!==void 0&&(m.error=t[3]),t[0]!==void 0&&(m.open=t[0]),e=new G({props:m}),g.push(()=>W(e,"error",l)),g.push(()=>W(e,"open",i)),e.$on("confirmModal",t[4]),{c(){v(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,s){R(e,n,s),r=!0},p(n,[s]){const c={};s&4&&(c.loading=n[2]),s&1024&&(c.$$scope={dirty:s,ctx:n}),!o&&s&8&&(o=!0,c.error=n[3],k(()=>o=!1)),!a&&s&1&&(a=!0,c.open=n[0],k(()=>a=!1)),e.$set(c)},i(n){r||(S(e.$$.fragment,n),r=!0)},o(n){j(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function oe(t,e,o){let a,r=M,l=()=>(r(),r=V(s,u=>o(9,a=u)),s);t.$$.on_destroy.push(()=>r());let{open:i}=e,{workflow:m}=e,{namespace:n}=e,{refresh:s}=e;l();let c,f="";const _=async()=>{o(3,f=""),o(2,c=!0);try{await X({namespace:n,workflow:m}),o(0,i=!1),z(s,a=Date.now(),a),J.push({id:"workflow-cancelation-success-toast",message:h("workflows.cancel-success")})}catch(u){o(3,f=K(u)?u.message:h("common.unknown-error"))}finally{o(2,c=!1)}};function p(u){f=u,o(3,f)}function H(u){i=u,o(0,i)}return t.$$set=u=>{"open"in u&&o(0,i=u.open),"workflow"in u&&o(5,m=u.workflow),"namespace"in u&&o(6,n=u.namespace),"refresh"in u&&l(o(1,s=u.refresh))},[i,s,c,f,_,m,n,p,H]}class _e extends B{constructor(e){super(),F(this,e,oe,ee,N,{open:0,workflow:5,namespace:6,refresh:1})}}function ne(t){let e,o=h("workflows.terminate-modal-title")+"",a;return{c(){e=T("h3"),a=y(o),this.h()},l(r){e=D(r,"H3",{slot:!0});var l=E(e);a=C(l,o),l.forEach(w),this.h()},h(){I(e,"slot","title")},m(r,l){A(r,e,l),b(e,a)},p:M,d(r){r&&w(e)}}}function te(t){let e,o,a=h("workflows.terminate-modal-confirmation")+"",r,l,i,m,n;function s(f){t[9](f)}let c={id:"workflow-termination-reason",class:"mt-4",placeholder:h("common.reason-placeholder"),label:h("common.reason-placeholder"),labelHidden:!0};return t[2]!==void 0&&(c.value=t[2]),i=new Z({props:c}),g.push(()=>W(i,"value",s)),{c(){e=T("div"),o=T("p"),r=y(a),l=Q(),v(i.$$.fragment),this.h()},l(f){e=D(f,"DIV",{slot:!0});var _=E(e);o=D(_,"P",{});var p=E(o);r=C(p,a),p.forEach(w),l=U(_),P(i.$$.fragment,_),_.forEach(w),this.h()},h(){I(e,"slot","content")},m(f,_){A(f,e,_),b(e,o),b(o,r),b(e,l),R(i,e,null),n=!0},p(f,_){const p={};!m&&_&4&&(m=!0,p.value=f[2],k(()=>m=!1)),i.$set(p)},i(f){n||(S(i.$$.fragment,f),n=!0)},o(f){j(i.$$.fragment,f),n=!1},d(f){f&&w(e),q(i)}}}function re(t){let e,o,a,r;function l(n){t[10](n)}function i(n){t[11](n)}let m={id:"terminate-confirmation-modal","data-testid":"terminate-confirmation-modal",loading:t[4],confirmText:h("workflows.terminate"),cancelText:h("common.cancel"),confirmType:"destructive",$$slots:{content:[te],title:[ne]},$$scope:{ctx:t}};return t[3]!==void 0&&(m.error=t[3]),t[0]!==void 0&&(m.open=t[0]),e=new G({props:m}),g.push(()=>W(e,"error",l)),g.push(()=>W(e,"open",i)),e.$on("cancelModal",t[5]),e.$on("confirmModal",t[6]),{c(){v(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,s){R(e,n,s),r=!0},p(n,[s]){const c={};s&16&&(c.loading=n[4]),s&8196&&(c.$$scope={dirty:s,ctx:n}),!o&&s&8&&(o=!0,c.error=n[3],k(()=>o=!1)),!a&&s&1&&(a=!0,c.open=n[0],k(()=>a=!1)),e.$set(c)},i(n){r||(S(e.$$.fragment,n),r=!0)},o(n){j(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function ae(t,e,o){let a,r=M,l=()=>(r(),r=V(s,d=>o(12,a=d)),s);t.$$.on_destroy.push(()=>r());let{open:i}=e,{workflow:m}=e,{namespace:n}=e,{refresh:s}=e;l();let c="",f="",_=!1;const p=()=>{o(0,i=!1),o(2,c="")},H=async()=>{o(3,f=""),o(4,_=!0);try{await Y({workflow:m,namespace:n,reason:c}),o(0,i=!1),o(2,c=""),z(s,a=Date.now(),a),J.push({id:"workflow-termination-success-toast",message:h("workflows.terminate-success")})}catch(d){o(3,f=K(d)?d.message:h("common.unknown-error"))}finally{o(4,_=!1)}};function u(d){c=d,o(2,c)}function L(d){f=d,o(3,f)}function O(d){i=d,o(0,i)}return t.$$set=d=>{"open"in d&&o(0,i=d.open),"workflow"in d&&o(7,m=d.workflow),"namespace"in d&&o(8,n=d.namespace),"refresh"in d&&l(o(1,s=d.refresh))},[i,s,c,f,_,p,H,m,n,u,L,O]}class he extends B{constructor(e){super(),F(this,e,ae,re,N,{open:0,workflow:7,namespace:8,refresh:1})}}const pe=(t,e,o)=>!t.disableWriteActions&&!t.workflowCancelDisabled&&!e.namespaceWriteDisabled(o),we=(t,e,o)=>!t.disableWriteActions&&!t.workflowResetDisabled&&!e.namespaceWriteDisabled(o),be=(t,e,o)=>!t.disableWriteActions&&!t.workflowTerminateDisabled&&!e.namespaceWriteDisabled(o);export{_e as C,he as T,be as a,we as b,pe as w};
