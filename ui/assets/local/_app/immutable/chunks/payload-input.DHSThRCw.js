import{s as T,h as L,b as U,j as D,k as N,f as h,d as S,m as w,i as I,p as K,t as Q,o as W,l as X,n as A,a6 as Y,M as O,N as Z,v as R,L as x,w as ee}from"./scheduler.BTg3iwM1.js";import{S as z,i as G,c as j,a as y,m as V,t as _,b,d as C,f as te,g as q,e as B}from"./index.64bqrcBm.js";import{A as ne}from"./alert.DsYEO683.js";import{C as re}from"./card.DfkH0-wT.js";import{C as oe}from"./code-block.VFTaBjTW.js";import{I as le}from"./icon.BfjNqDoE.js";import{t as P}from"./translate.BBe5dcco.js";import{t as ae}from"./toaster.CzEiOCLc.js";import{L as se}from"./label.B_QjmRc-.js";import{R as ie,a as H}from"./menu-button.CJ9IIvaj.js";import{T as ue}from"./tooltip.HgN0y_kn.js";function fe(i){let e,t,r,o,n,p,s;return t=new le({props:{name:"upload"}}),{c(){e=L("label"),j(t.$$.fragment),r=U(),o=L("input"),this.h()},l(a){e=D(a,"LABEL",{for:!0,class:!0});var u=N(e);y(t.$$.fragment,u),u.forEach(h),r=S(a),o=D(a,"INPUT",{id:!0,class:!0,type:!0,accept:!0}),this.h()},h(){w(e,"for",i[0]),w(e,"class","file-upload-label svelte-nqh6y4"),w(o,"id",i[0]),w(o,"class","hidden"),w(o,"type","file"),w(o,"accept",i[1])},m(a,u){I(a,e,u),V(t,e,null),I(a,r,u),I(a,o,u),n=!0,p||(s=K(o,"change",i[2]),p=!0)},p(a,[u]){(!n||u&1)&&w(e,"for",a[0]),(!n||u&1)&&w(o,"id",a[0]),(!n||u&2)&&w(o,"accept",a[1])},i(a){n||(_(t.$$.fragment,a),n=!0)},o(a){b(t.$$.fragment,a),n=!1},d(a){a&&(h(e),h(r),h(o)),C(t),p=!1,s()}}}function ce(i,e,t){let{id:r}=e,{accept:o=".json"}=e,{onUpload:n}=e;const p=s=>{var a;const u=s.target,g=(a=u==null?void 0:u.files)===null||a===void 0?void 0:a[0],f=new FileReader;g&&(f.readAsText(g),f.onload=()=>{var m,v;try{const E=(v=(m=f==null?void 0:f.result)===null||m===void 0?void 0:m.toString())!==null&&v!==void 0?v:"";n(E)}catch{ae.push({variant:"error",message:P("common.upload-error")})}})};return i.$$set=s=>{"id"in s&&t(0,r=s.id),"accept"in s&&t(1,o=s.accept),"onUpload"in s&&t(3,n=s.onUpload)},[r,o,p,n]}class pe extends z{constructor(e){super(),G(this,e,ce,fe,T,{id:0,accept:1,onUpload:3})}}function me(i){let e,t,r,o;return e=new H({props:{id:"json/plain",value:"json/plain",label:"json/plain"}}),r=new H({props:{id:"json/protobuf",value:"json/protobuf",label:"json/protobuf"}}),{c(){j(e.$$.fragment),t=U(),j(r.$$.fragment)},l(n){y(e.$$.fragment,n),t=S(n),y(r.$$.fragment,n)},m(n,p){V(e,n,p),I(n,t,p),V(r,n,p),o=!0},p:R,i(n){o||(_(e.$$.fragment,n),_(r.$$.fragment,n),o=!0)},o(n){b(e.$$.fragment,n),b(r.$$.fragment,n),o=!1},d(n){n&&h(t),C(e,n),C(r,n)}}}function de(i){let e,t;return e=new pe({props:{id:"start-workflow-input-file-upload",onUpload:i[6]}}),{c(){j(e.$$.fragment)},l(r){y(e.$$.fragment,r)},m(r,o){V(e,r,o),t=!0},p:R,i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){C(e,r)}}}function J(i){let e,t,r={id:"payload-input",maxHeight:320,content:i[0],editable:!0,copyable:!1};return e=new oe({props:r}),i[9](e),e.$on("change",i[5]),{c(){j(e.$$.fragment)},l(o){y(e.$$.fragment,o)},m(o,n){V(e,o,n),t=!0},p(o,n){const p={};n&1&&(p.content=o[0]),e.$set(p)},i(o){t||(_(e.$$.fragment,o),t=!0)},o(o){b(e.$$.fragment,o),t=!1},d(o){i[9](null),C(e,o)}}}function M(i){let e,t;return e=new ne({props:{intent:"error",title:P("common.input-valid-json")}}),{c(){j(e.$$.fragment)},l(r){y(e.$$.fragment,r)},m(r,o){V(e,r,o),t=!0},p:R,i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){C(e,r)}}}function ge(i){let e,t,r,o,n,p,s,a,u,g=i[4],f,m;function v(c){i[8](c)}let E={description:"Encoding",name:"encoding",$$slots:{default:[me]},$$scope:{ctx:i}};i[1]!==void 0&&(E.group=i[1]),t=new ie({props:E}),O.push(()=>te(t,"group",v)),n=new ue({props:{text:P("common.upload-json"),left:!0,$$slots:{default:[de]},$$scope:{ctx:i}}}),a=new se({props:{for:"payload-input",label:P("workflows.signal-payload-input-label")}});let $=J(i),d=i[2]&&M();return{c(){e=L("div"),j(t.$$.fragment),o=U(),j(n.$$.fragment),p=U(),s=L("div"),j(a.$$.fragment),u=U(),$.c(),f=U(),d&&d.c(),this.h()},l(c){e=D(c,"DIV",{class:!0});var l=N(e);y(t.$$.fragment,l),o=S(l),y(n.$$.fragment,l),l.forEach(h),p=S(c),s=D(c,"DIV",{class:!0});var k=N(s);y(a.$$.fragment,k),u=S(k),$.l(k),f=S(k),d&&d.l(k),k.forEach(h),this.h()},h(){w(e,"class","flex items-center justify-between"),w(s,"class","flex flex-col gap-2")},m(c,l){I(c,e,l),V(t,e,null),A(e,o),V(n,e,null),I(c,p,l),I(c,s,l),V(a,s,null),A(s,u),$.m(s,null),A(s,f),d&&d.m(s,null),m=!0},p(c,l){const k={};l&8192&&(k.$$scope={dirty:l,ctx:c}),!r&&l&2&&(r=!0,k.group=c[1],Z(()=>r=!1)),t.$set(k);const F={};l&8192&&(F.$$scope={dirty:l,ctx:c}),n.$set(F),l&16&&T(g,g=c[4])?(q(),b($,1,1,R),B(),$=J(c),$.c(),_($,1),$.m(s,f)):$.p(c,l),c[2]?d?(d.p(c,l),l&4&&_(d,1)):(d=M(),d.c(),_(d,1),d.m(s,null)):d&&(q(),b(d,1,1,()=>{d=null}),B())},i(c){m||(_(t.$$.fragment,c),_(n.$$.fragment,c),_(a.$$.fragment,c),_($),_(d),m=!0)},o(c){b(t.$$.fragment,c),b(n.$$.fragment,c),b(a.$$.fragment,c),b($),b(d),m=!1},d(c){c&&(h(e),h(p),h(s)),C(t),C(n),C(a),$.d(c),d&&d.d()}}}function _e(i){let e,t,r="Input",o,n,p=P("workflows.signal-payload-input-label-hint")+"",s,a,u,g;return u=new re({props:{class:"flex flex-col gap-2",$$slots:{default:[ge]},$$scope:{ctx:i}}}),{c(){e=L("div"),t=L("h5"),t.textContent=r,o=U(),n=L("span"),s=Q(p),a=U(),j(u.$$.fragment),this.h()},l(f){e=D(f,"DIV",{class:!0});var m=N(e);t=D(m,"H5",{"data-svelte-h":!0}),W(t)!=="svelte-1u3a9wa"&&(t.textContent=r),o=S(m),n=D(m,"SPAN",{class:!0});var v=N(n);s=X(v,p),v.forEach(h),m.forEach(h),a=S(f),y(u.$$.fragment,f),this.h()},h(){w(n,"class","text-xs font-light italic"),w(e,"class","flex items-center justify-between")},m(f,m){I(f,e,m),A(e,t),A(e,o),A(e,n),A(n,s),I(f,a,m),V(u,f,m),g=!0},p(f,[m]){const v={};m&8223&&(v.$$scope={dirty:m,ctx:f}),u.$set(v)},i(f){g||(_(u.$$.fragment,f),g=!0)},o(f){b(u.$$.fragment,f),g=!1},d(f){f&&(h(e),h(a)),C(u,f)}}}function $e(i,e,t){let r,o=R,n=()=>(o(),o=x(s,l=>t(10,r=l)),s);i.$$.on_destroy.push(()=>o());let{input:p}=e,{encoding:s}=e;n();let{error:a=!1}=e,{resetValues:u=!1}=e,g,f=!1;const m=l=>{t(0,p=l.detail)},v=l=>{if(!p)return!0;try{return JSON.parse(l),!0}catch{return!1}},E=()=>{ee(s,r="json/plain",r),t(0,p=""),g==null||g.resetView(p),t(4,f=!1)},$=l=>{t(0,p=l),t(4,f=!0)};Y(()=>{E()});function d(l){s=l,n(t(1,s))}function c(l){O[l?"unshift":"push"](()=>{g=l,t(3,g)})}return i.$$set=l=>{"input"in l&&t(0,p=l.input),"encoding"in l&&n(t(1,s=l.encoding)),"error"in l&&t(2,a=l.error),"resetValues"in l&&t(7,u=l.resetValues)},i.$$.update=()=>{i.$$.dirty&1&&t(2,a=!v(p)),i.$$.dirty&128&&u&&E()},[p,s,a,g,f,m,$,u,d,c]}class Ue extends z{constructor(e){super(),G(this,e,$e,_e,T,{input:0,encoding:1,error:2,resetValues:7})}}export{Ue as P};
