const f=i=>Array.from(i.querySelectorAll('[href], button, textarea, input, div[contentEditable="true"], select, [tabindex][tabindex="0"]')).filter(r=>!r.hasAttribute("disabled")&&r.getAttribute("tabindex")!=="-1"),v=(i,r)=>{let e,n;const s=t=>{t.key==="Tab"&&(t.shiftKey?document.activeElement===e&&(n.focus(),t.preventDefault()):document.activeElement===n&&(e.focus(),t.preventDefault()))},d=(t=!1)=>{if(r===!1)return;const o=f(i);e=o[0],n=o[o.length-1],t||e==null||e.focus(),e==null||e.addEventListener("keydown",s),n==null||n.addEventListener("keydown",s)},u=()=>{e==null||e.removeEventListener("keydown",s),n==null||n.removeEventListener("keydown",s)},c=(t,o)=>(t.length&&(u(),d(!0)),o);return new MutationObserver(c).observe(i,{childList:!0,subtree:!0}),d(),{update(t){r=t,t?d():u()},destroy(){u()}}};export{v as f,f as g};
