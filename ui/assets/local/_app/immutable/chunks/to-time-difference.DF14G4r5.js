import{C as f}from"./scheduler.BTg3iwM1.js";import{t as n}from"./translate.BBe5dcco.js";import{f as p,r as h,t as b}from"./time-format.C87BwFjA.js";import{c}from"./format-camel-case.ByTIZu23.js";import{s as m,a as w,p as l,b as y,c as D}from"./get-single-attribute-for-event.CKvKQoRg.js";const a=new Set(["header"]),A=new Set(["taskQueue","retryPolicy","parentWorkflowExecution","workflowExecution","meta"]),x=new Set(["maximumAttempts"]),v=(e,t)=>e===0?n("workflows.no-expiration"):t,S=(e,t)=>e?e-t:n("workflows.unlimited"),T=e=>e||n("workflows.unlimited"),N=(e,t)=>e==="maximumAttempts"&&!t?n("workflows.unlimited"):t,u=(e,t)=>{if(A.has(t)&&typeof e[t]=="object"){for(const[r,s]of Object.entries(e[t]))y(s)&&(x.has(r)?e[`${t}${c(r)}`]=N(r,s):e[`${t}${c(r)}`]=s);delete e[t]}},$=e=>{const t={};if(e.attributes)for(const[r,s]of Object.entries(e.attributes)){const o=m(r,s);!a.has(r)&&o&&(t[r]=s),u(t,r)}return t},F=e=>{const t={};return e.eventList.forEach(r=>{for(const[s,o]of Object.entries(r.attributes)){const i=m(s,o);!a.has(s)&&i&&(t[s]=o),u(t,s)}}),Object.keys(t).forEach(r=>{w(r,t[r])||delete t[r]}),t},L=e=>{const t={},r=Object.entries(e).sort(([s],[o])=>l.indexOf(s)-l.indexOf(o));for(const[s,o]of r){const i=D(s),d=s.toLowerCase().includes("time")?p(String(o),f(b),{relative:f(h)}):o;!a.has(s)&&i&&(t[s]=d),u(t,s)}return t},P=({date:e,now:t=Date.now(),negativeDefault:r})=>{if(!e)return"";const s=String(e);try{const i=(Number(new Date(s))-t)/1e3;return r&&i<0?r:isNaN(i)?"":`${i.toFixed(0)}s`}catch{return""}};export{T as a,v as b,F as c,L as d,$ as e,S as f,P as t};
