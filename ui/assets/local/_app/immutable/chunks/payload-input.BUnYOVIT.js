import{s as R,h as L,b as U,j as P,k as T,f as h,d as S,m as w,i as C,p as K,t as Q,o as W,l as X,n as A,a6 as Y,M as O,N as Z,v as N,L as x,w as ee}from"./scheduler.BTg3iwM1.js";import{S as z,i as G,c as j,a as y,m as I,t as _,b as $,d as V,f as te,g as q,e as B}from"./index.64bqrcBm.js";import{A as ne}from"./alert.DsYEO683.js";import{C as oe}from"./card.DfkH0-wT.js";import{C as re}from"./code-block.yNB0zWUy.js";import{I as le}from"./icon.BfjNqDoE.js";import{t as D}from"./translate.BBe5dcco.js";import{t as ae}from"./toaster.B7Wb4S1v.js";import{L as se}from"./label.B_QjmRc-.js";import{R as ie,a as H}from"./menu-button.C4p0aLyL.js";import{T as ue}from"./tooltip.HgN0y_kn.js";function fe(i){let e,t,o,r,n,p,s;return t=new le({props:{name:"upload"}}),{c(){e=L("label"),j(t.$$.fragment),o=U(),r=L("input"),this.h()},l(a){e=P(a,"LABEL",{for:!0,class:!0});var f=T(e);y(t.$$.fragment,f),f.forEach(h),o=S(a),r=P(a,"INPUT",{id:!0,class:!0,type:!0,accept:!0}),this.h()},h(){w(e,"for",i[0]),w(e,"class","file-upload-label svelte-nqh6y4"),w(r,"id",i[0]),w(r,"class","hidden"),w(r,"type","file"),w(r,"accept",i[1])},m(a,f){C(a,e,f),I(t,e,null),C(a,o,f),C(a,r,f),n=!0,p||(s=K(r,"change",i[2]),p=!0)},p(a,[f]){(!n||f&1)&&w(e,"for",a[0]),(!n||f&1)&&w(r,"id",a[0]),(!n||f&2)&&w(r,"accept",a[1])},i(a){n||(_(t.$$.fragment,a),n=!0)},o(a){$(t.$$.fragment,a),n=!1},d(a){a&&(h(e),h(o),h(r)),V(t),p=!1,s()}}}function ce(i,e,t){let{id:o}=e,{accept:r=".json"}=e,{onUpload:n}=e;const p=s=>{var a;const f=s.target,g=(a=f==null?void 0:f.files)===null||a===void 0?void 0:a[0],u=new FileReader;g&&(u.readAsText(g),u.onload=()=>{var d,v;try{const E=(v=(d=u==null?void 0:u.result)===null||d===void 0?void 0:d.toString())!==null&&v!==void 0?v:"";n(E)}catch{ae.push({variant:"error",message:D("common.upload-error")})}})};return i.$$set=s=>{"id"in s&&t(0,o=s.id),"accept"in s&&t(1,r=s.accept),"onUpload"in s&&t(3,n=s.onUpload)},[o,r,p,n]}class pe extends z{constructor(e){super(),G(this,e,ce,fe,R,{id:0,accept:1,onUpload:3})}}function de(i){let e,t,o,r;return e=new H({props:{id:"json/plain",value:"json/plain",label:"json/plain"}}),o=new H({props:{id:"json/protobuf",value:"json/protobuf",label:"json/protobuf"}}),{c(){j(e.$$.fragment),t=U(),j(o.$$.fragment)},l(n){y(e.$$.fragment,n),t=S(n),y(o.$$.fragment,n)},m(n,p){I(e,n,p),C(n,t,p),I(o,n,p),r=!0},p:N,i(n){r||(_(e.$$.fragment,n),_(o.$$.fragment,n),r=!0)},o(n){$(e.$$.fragment,n),$(o.$$.fragment,n),r=!1},d(n){n&&h(t),V(e,n),V(o,n)}}}function me(i){let e,t;return e=new pe({props:{id:"start-workflow-input-file-upload",onUpload:i[6]}}),{c(){j(e.$$.fragment)},l(o){y(e.$$.fragment,o)},m(o,r){I(e,o,r),t=!0},p:N,i(o){t||(_(e.$$.fragment,o),t=!0)},o(o){$(e.$$.fragment,o),t=!1},d(o){V(e,o)}}}function J(i){let e,t,o={id:"payload-input",maxHeight:320,content:i[0],editable:!0,copyable:!1};return e=new re({props:o}),i[9](e),e.$on("change",i[5]),{c(){j(e.$$.fragment)},l(r){y(e.$$.fragment,r)},m(r,n){I(e,r,n),t=!0},p(r,n){const p={};n&1&&(p.content=r[0]),e.$set(p)},i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){$(e.$$.fragment,r),t=!1},d(r){i[9](null),V(e,r)}}}function M(i){let e,t;return e=new ne({props:{intent:"error",title:D("common.input-valid-json")}}),{c(){j(e.$$.fragment)},l(o){y(e.$$.fragment,o)},m(o,r){I(e,o,r),t=!0},p:N,i(o){t||(_(e.$$.fragment,o),t=!0)},o(o){$(e.$$.fragment,o),t=!1},d(o){V(e,o)}}}function ge(i){let e,t,o,r,n,p,s,a,f,g=i[3],u,d;function v(c){i[8](c)}let E={description:"Encoding",name:"encoding",$$slots:{default:[de]},$$scope:{ctx:i}};i[1]!==void 0&&(E.group=i[1]),t=new ie({props:E}),O.push(()=>te(t,"group",v)),n=new ue({props:{text:D("common.upload-json"),left:!0,$$slots:{default:[me]},$$scope:{ctx:i}}}),a=new se({props:{for:"payload-input",label:D("workflows.signal-payload-input-label")}});let b=J(i),m=i[2]&&M();return{c(){e=L("div"),j(t.$$.fragment),r=U(),j(n.$$.fragment),p=U(),s=L("div"),j(a.$$.fragment),f=U(),b.c(),u=U(),m&&m.c(),this.h()},l(c){e=P(c,"DIV",{class:!0});var l=T(e);y(t.$$.fragment,l),r=S(l),y(n.$$.fragment,l),l.forEach(h),p=S(c),s=P(c,"DIV",{class:!0});var k=T(s);y(a.$$.fragment,k),f=S(k),b.l(k),u=S(k),m&&m.l(k),k.forEach(h),this.h()},h(){w(e,"class","flex items-center justify-between"),w(s,"class","flex flex-col gap-2")},m(c,l){C(c,e,l),I(t,e,null),A(e,r),I(n,e,null),C(c,p,l),C(c,s,l),I(a,s,null),A(s,f),b.m(s,null),A(s,u),m&&m.m(s,null),d=!0},p(c,l){const k={};l&8192&&(k.$$scope={dirty:l,ctx:c}),!o&&l&2&&(o=!0,k.group=c[1],Z(()=>o=!1)),t.$set(k);const F={};l&8192&&(F.$$scope={dirty:l,ctx:c}),n.$set(F),l&8&&R(g,g=c[3])?(q(),$(b,1,1,N),B(),b=J(c),b.c(),_(b,1),b.m(s,u)):b.p(c,l),c[2]?m?(m.p(c,l),l&4&&_(m,1)):(m=M(),m.c(),_(m,1),m.m(s,null)):m&&(q(),$(m,1,1,()=>{m=null}),B())},i(c){d||(_(t.$$.fragment,c),_(n.$$.fragment,c),_(a.$$.fragment,c),_(b),_(m),d=!0)},o(c){$(t.$$.fragment,c),$(n.$$.fragment,c),$(a.$$.fragment,c),$(b),$(m),d=!1},d(c){c&&(h(e),h(p),h(s)),V(t),V(n),V(a),b.d(c),m&&m.d()}}}function _e(i){let e,t,o="Input",r,n,p=D("workflows.signal-payload-input-label-hint")+"",s,a,f,g;return f=new oe({props:{class:"flex flex-col gap-2",$$slots:{default:[ge]},$$scope:{ctx:i}}}),{c(){e=L("div"),t=L("h5"),t.textContent=o,r=U(),n=L("span"),s=Q(p),a=U(),j(f.$$.fragment),this.h()},l(u){e=P(u,"DIV",{class:!0});var d=T(e);t=P(d,"H5",{"data-svelte-h":!0}),W(t)!=="svelte-1u3a9wa"&&(t.textContent=o),r=S(d),n=P(d,"SPAN",{class:!0});var v=T(n);s=X(v,p),v.forEach(h),d.forEach(h),a=S(u),y(f.$$.fragment,u),this.h()},h(){w(n,"class","text-xs font-light italic"),w(e,"class","flex items-center justify-between")},m(u,d){C(u,e,d),A(e,t),A(e,r),A(e,n),A(n,s),C(u,a,d),I(f,u,d),g=!0},p(u,[d]){const v={};d&8223&&(v.$$scope={dirty:d,ctx:u}),f.$set(v)},i(u){g||(_(f.$$.fragment,u),g=!0)},o(u){$(f.$$.fragment,u),g=!1},d(u){u&&(h(e),h(a)),V(f,u)}}}const be=["json/plain","json/protobuf"],Se=i=>be.includes(i);function $e(i,e,t){let o,r=N,n=()=>(r(),r=x(s,l=>t(10,o=l)),s);i.$$.on_destroy.push(()=>r());let{input:p}=e,{encoding:s}=e;n();let{error:a=!1}=e,{resetValues:f=!1}=e,{loading:g=!1}=e,u;const d=l=>{t(0,p=l.detail)},v=l=>{if(!p)return!0;try{return JSON.parse(l),!0}catch{return!1}},E=()=>{ee(s,o="json/plain",o),t(0,p=""),u==null||u.resetView(p),t(3,g=!1)},b=l=>{t(0,p=l),t(3,g=!0)};Y(()=>{E()});function m(l){s=l,n(t(1,s))}function c(l){O[l?"unshift":"push"](()=>{u=l,t(4,u)})}return i.$$set=l=>{"input"in l&&t(0,p=l.input),"encoding"in l&&n(t(1,s=l.encoding)),"error"in l&&t(2,a=l.error),"resetValues"in l&&t(7,f=l.resetValues),"loading"in l&&t(3,g=l.loading)},i.$$.update=()=>{i.$$.dirty&1&&t(2,a=!v(p)),i.$$.dirty&128&&f&&E()},[p,s,a,g,u,d,b,f,m,c]}class Ae extends z{constructor(e){super(),G(this,e,$e,_e,R,{input:0,encoding:1,error:2,resetValues:7,loading:3})}}export{Ae as P,Se as i};
