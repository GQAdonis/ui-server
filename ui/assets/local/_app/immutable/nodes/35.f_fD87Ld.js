import{s as B,b as A,d as R,i as h,f as _,c as b,h as x,j as ee,k as te,m as re,x as E,w as W,t as D,l as J,q as K,v as S}from"../chunks/scheduler.1T9hOnFr.js";import{S as O,i as Q,c as k,a as w,m as $,t as c,g as I,b as p,e as N,d}from"../chunks/index.cVovwi_s.js";import{e as j,u as ne,o as oe}from"../chunks/each.QHpLJPfe.js";import{p as le}from"../chunks/stores.9YN51NSj.js";import{E as se,a as ie,b as fe}from"../chunks/event-summary-table.EHobKsob.js";import{E as ae}from"../chunks/event-history-timeline.ciK9CXdp.js";import{L as ue}from"../chunks/link.x9gIAKvb.js";import{t as me}from"../chunks/translate.HrioCK44.js";import{g as ce}from"../chunks/index.zfLR4Xev.js";import{f as pe}from"../chunks/events-service.FaMcTjN3.js";import{b as _e}from"../chunks/filters.3sdaDyVs.js";import{f as F}from"../chunks/events.-o3U9j0Y.js";import{w as he}from"../chunks/workflow-run.8ur_lhwf.js";import{i as ge}from"../chunks/get-workflow-relationships.ucgINiau.js";import{b as ke}from"../chunks/route-for.9tZzrbZp.js";function G(a,t,r){const e=a.slice();return e[17]=t[r],e}function M(a){let t,r,e,l;const s=[$e,we],i=[];function o(n,f){return n[4]?0:1}return r=o(a),e=i[r]=s[r](a),{c(){t=x("h2"),e.c(),this.h()},l(n){t=ee(n,"H2",{class:!0});var f=te(t);e.l(f),f.forEach(_),this.h()},h(){re(t,"class","flex w-full items-center")},m(n,f){h(n,t,f),i[r].m(t,null),l=!0},p(n,f){let u=r;r=o(n),r===u?i[r].p(n,f):(I(),p(i[u],1,1,()=>{i[u]=null}),N(),e=i[r],e?e.p(n,f):(e=i[r]=s[r](n),e.c()),c(e,1),e.m(t,null))},i(n){l||(c(e),l=!0)},o(n){p(e),l=!1},d(n){n&&_(t),i[r].d()}}}function we(a){let t=a[0].displayName+"",r;return{c(){r=D(t)},l(e){r=J(e,t)},m(e,l){h(e,r,l)},p(e,l){l&1&&t!==(t=e[0].displayName+"")&&K(r,t)},i:S,o:S,d(e){e&&_(r)}}}function $e(a){let t,r;return t=new ue({props:{href:a[4],$$slots:{default:[de]},$$scope:{ctx:a}}}),{c(){k(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,l){$(t,e,l),r=!0},p(e,l){const s={};l&16&&(s.href=e[4]),l&1048577&&(s.$$scope={dirty:l,ctx:e}),t.$set(s)},i(e){r||(c(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){d(t,e)}}}function de(a){let t=a[0].displayName+"",r;return{c(){r=D(t)},l(e){r=J(e,t)},m(e,l){h(e,r,l)},p(e,l){l&1&&t!==(t=e[0].displayName+"")&&K(r,t)},d(e){e&&_(r)}}}function P(a){let t,r;return t=new ie({props:{loading:a[2],title:me("events.group-empty-state-title"),content:""}}),{c(){k(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,l){$(t,e,l),r=!0},p(e,l){const s={};l&4&&(s.loading=e[2]),t.$set(s)},i(e){r||(c(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){d(t,e)}}}function z(a,t){let r,e,l;return e=new fe({props:{event:t[17],compact:T,expandAll:!0,initialItem:t[6],active:!0}}),{key:a,first:null,c(){r=E(),k(e.$$.fragment),this.h()},l(s){r=E(),w(e.$$.fragment,s),this.h()},h(){this.first=r},m(s,i){h(s,r,i),$(e,s,i),l=!0},p(s,i){t=s;const o={};i&8&&(o.event=t[17]),i&64&&(o.initialItem=t[6]),e.$set(o)},i(s){l||(c(e.$$.fragment,s),l=!0)},o(s){p(e.$$.fragment,s),l=!1},d(s){s&&_(r),d(e,s)}}}function ye(a){let t=[],r=new Map,e,l,s=j(a[3]);const i=n=>`${n[17].id}-${n[17].timestamp}`;for(let n=0;n<s.length;n+=1){let f=G(a,s,n),u=i(f);r.set(u,t[n]=z(u,f))}let o=null;return s.length||(o=P(a)),{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=E(),o&&o.c()},l(n){for(let f=0;f<t.length;f+=1)t[f].l(n);e=E(),o&&o.l(n)},m(n,f){for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(n,f);h(n,e,f),o&&o.m(n,f),l=!0},p(n,f){f&76&&(s=j(n[3]),I(),t=ne(t,f,i,1,n,s,r,e.parentNode,oe,z,e,G),N(),!s.length&&o?o.p(n,f):s.length?o&&(I(),p(o,1,1,()=>{o=null}),N()):(o=P(n),o.c(),c(o,1),o.m(e.parentNode,e)))},i(n){if(!l){for(let f=0;f<s.length;f+=1)c(t[f]);l=!0}},o(n){for(let f=0;f<t.length;f+=1)p(t[f]);l=!1},d(n){n&&_(e);for(let f=0;f<t.length;f+=1)t[f].d(n);o&&o.d(n)}}}function ve(a){let t,r,e,l,s,i=a[0]&&M(a);return r=new ae({props:{history:a[1],maxHeight:240}}),l=new se({props:{updating:a[5],compact:T,$$slots:{default:[ye]},$$scope:{ctx:a}}}),{c(){i&&i.c(),t=A(),k(r.$$.fragment),e=A(),k(l.$$.fragment)},l(o){i&&i.l(o),t=R(o),w(r.$$.fragment,o),e=R(o),w(l.$$.fragment,o)},m(o,n){i&&i.m(o,n),h(o,t,n),$(r,o,n),h(o,e,n),$(l,o,n),s=!0},p(o,[n]){o[0]?i?(i.p(o,n),n&1&&c(i,1)):(i=M(o),i.c(),c(i,1),i.m(t.parentNode,t)):i&&(I(),p(i,1,1,()=>{i=null}),N());const f={};n&2&&(f.history=o[1]),r.$set(f);const u={};n&32&&(u.updating=o[5]),n&1048652&&(u.$$scope={dirty:n,ctx:o}),l.$set(u)},i(o){s||(c(i),c(r.$$.fragment,o),c(l.$$.fragment,o),s=!0)},o(o){p(i),p(r.$$.fragment,o),p(l.$$.fragment,o),s=!1},d(o){o&&(_(t),_(e)),i&&i.d(o),d(r,o),d(l,o)}}}const T=!0;function be(a,t,r){let e,l,s,i,o,n,f,u,H,C,y;b(a,F,m=>r(1,u=m)),b(a,_e,m=>r(12,H=m)),b(a,he,m=>r(13,C=m)),b(a,le,m=>r(10,y=m));let L=!1,v,q=[];const U=()=>{W(F,u=[],u),r(2,L=!0)},V=async(m,g,Y)=>{(C.workflow.id!==g||!u.length)&&(U(),W(F,u=await pe({namespace:m,workflowId:g,runId:Y,sort:H}),u),r(2,L=!1)),r(0,v=ce(u,H).find(Z=>Z.id===i)),v&&r(3,q=[v])};function X(m){const g=m==null?void 0:m.eventList.find(ge);return g?ke({namespace:e,workflow:g.attributes.workflowExecution.workflowId,run:g.attributes.workflowExecution.runId}):""}return a.$$.update=()=>{a.$$.dirty&1024&&r(7,{namespace:e,workflow:l,run:s,id:i}=y.params,e,(r(9,l),r(10,y)),(r(8,s),r(10,y))),a.$$.dirty&896&&V(e,l,s),a.$$.dirty&2&&r(6,o=u==null?void 0:u[0]),a.$$.dirty&2&&r(5,n=!u.length),a.$$.dirty&1&&r(4,f=X(v))},[v,u,L,q,f,n,o,e,s,l,y]}class Ee extends O{constructor(t){super(),Q(this,t,be,ve,B,{})}}function Ie(a){let t,r;return t=new Ee({}),{c(){k(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,l){$(t,e,l),r=!0},p:S,i(e){r||(c(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){d(t,e)}}}class Be extends O{constructor(t){super(),Q(this,t,null,Ie,B,{})}}export{Be as component};
