import{s as Ee,h as p,t as E,b,j as u,k as m,l as k,f,d as g,m as h,i as le,n as s,q as M,v as D,c as Ie,r as nt,w as it,C as ge,I as xe,x as et}from"../chunks/scheduler.1T9hOnFr.js";import{S as we,i as De,c as X,a as Y,m as Z,t as j,g as lt,b as F,e as rt,d as x}from"../chunks/index.cVovwi_s.js";import{p as ct}from"../chunks/stores.JfW24u3S.js";import{P as ft}from"../chunks/page-title.YnYjoVKm.js";import{t as V}from"../chunks/translate.HrioCK44.js";import{h as pt,u as ut}from"../chunks/await_block.phqp6y2-.js";import{f as Re,t as mt,r as dt}from"../chunks/time-format.qLq3JGrX.js";import{B as ht}from"../chunks/badge.kH3kuYyU.js";import{T as vt}from"../chunks/toggle-switch.4rxv91L3.js";import{T as _t}from"../chunks/tooltip.HCleTy9P.js";import{a as ye,d as $t}from"../chunks/batch-operations.me3-HgHK.js";import{C as tt}from"../chunks/card.2ruAazLH.js";import{L as bt}from"../chunks/link.WtKC91Ei.js";import{o as at}from"../chunks/route-for.QcCUIEiI.js";function gt(o){let e,a,t=V("batch.details")+"",r,l,c,n,i=V("batch.operation-type")+"",d,v,O,C=o[0].operationType+"",B,U,_,$,P=V("batch.identity")+"",S,A,T,q=o[0].identity+"",L,K,y,G,me=V("common.reason")+"",de,J,Q,ee=o[0].reason+"",fe,W,R,te,ae=V("common.start-time")+"",z,w,re,oe=Re(o[0].startTime,o[1],{relative:o[2]})+"",ne,ve,H,ie,he=V("common.close-time")+"",pe,_e,ce,se=Re(o[0].closeTime,o[1],{relative:o[2]})+"",Pe,Ne,ue,$e,Be=V("batch.total-operations")+"",Fe,Ae,be,ke=Intl.NumberFormat("en-US").format(o[0].totalOperationCount)+"",Ve;return{c(){e=p("div"),a=p("p"),r=E(t),l=b(),c=p("div"),n=p("p"),d=E(i),v=b(),O=p("p"),B=E(C),U=b(),_=p("div"),$=p("p"),S=E(P),A=b(),T=p("p"),L=E(q),K=b(),y=p("div"),G=p("p"),de=E(me),J=b(),Q=p("p"),fe=E(ee),W=b(),R=p("div"),te=p("p"),z=E(ae),w=b(),re=p("p"),ne=E(oe),ve=b(),H=p("div"),ie=p("p"),pe=E(he),_e=b(),ce=p("p"),Pe=E(se),Ne=b(),ue=p("div"),$e=p("p"),Fe=E(Be),Ae=b(),be=p("p"),Ve=E(ke),this.h()},l(N){e=u(N,"DIV",{class:!0});var I=m(e);a=u(I,"P",{});var Ue=m(a);r=k(Ue,t),Ue.forEach(f),l=g(I),c=u(I,"DIV",{class:!0});var Ce=m(c);n=u(Ce,"P",{class:!0});var He=m(n);d=k(He,i),He.forEach(f),v=g(Ce),O=u(Ce,"P",{class:!0});var Me=m(O);B=k(Me,C),Me.forEach(f),Ce.forEach(f),U=g(I),_=u(I,"DIV",{class:!0});var ze=m(_);$=u(ze,"P",{class:!0});var qe=m($);S=k(qe,P),qe.forEach(f),A=g(ze),T=u(ze,"P",{class:!0});var Le=m(T);L=k(Le,q),Le.forEach(f),ze.forEach(f),K=g(I),y=u(I,"DIV",{class:!0});var Te=m(y);G=u(Te,"P",{class:!0});var Ke=m(G);de=k(Ke,me),Ke.forEach(f),J=g(Te),Q=u(Te,"P",{class:!0});var Ge=m(Q);fe=k(Ge,ee),Ge.forEach(f),Te.forEach(f),W=g(I),R=u(I,"DIV",{class:!0});var je=m(R);te=u(je,"P",{class:!0});var Je=m(te);z=k(Je,ae),Je.forEach(f),w=g(je),re=u(je,"P",{class:!0});var Qe=m(re);ne=k(Qe,oe),Qe.forEach(f),je.forEach(f),ve=g(I),H=u(I,"DIV",{class:!0});var Oe=m(H);ie=u(Oe,"P",{class:!0});var We=m(ie);pe=k(We,he),We.forEach(f),_e=g(Oe),ce=u(Oe,"P",{class:!0});var Xe=m(ce);Pe=k(Xe,se),Xe.forEach(f),Oe.forEach(f),Ne=g(I),ue=u(I,"DIV",{class:!0});var Se=m(ue);$e=u(Se,"P",{class:!0});var Ye=m($e);Fe=k(Ye,Be),Ye.forEach(f),Ae=g(Se),be=u(Se,"P",{class:!0});var Ze=m(be);Ve=k(Ze,ke),Ze.forEach(f),Se.forEach(f),I.forEach(f),this.h()},h(){h(n,"class","batch-operation-key svelte-z5po3c"),h(O,"class","batch-operation-value svelte-z5po3c"),h(c,"class","batch-operation-detail svelte-z5po3c"),h($,"class","batch-operation-key svelte-z5po3c"),h(T,"class","batch-operation-value svelte-z5po3c"),h(_,"class","batch-operation-detail svelte-z5po3c"),h(G,"class","batch-operation-key svelte-z5po3c"),h(Q,"class","batch-operation-value svelte-z5po3c"),h(y,"class","batch-operation-detail svelte-z5po3c"),h(te,"class","batch-operation-key svelte-z5po3c"),h(re,"class","batch-operation-value svelte-z5po3c"),h(R,"class","batch-operation-detail svelte-z5po3c"),h(ie,"class","batch-operation-key svelte-z5po3c"),h(ce,"class","batch-operation-value svelte-z5po3c"),h(H,"class","batch-operation-detail svelte-z5po3c"),h($e,"class","batch-operation-key svelte-z5po3c"),h(be,"class","batch-operation-value svelte-z5po3c"),h(ue,"class","batch-operation-detail svelte-z5po3c"),h(e,"class","flex flex-col gap-2")},m(N,I){le(N,e,I),s(e,a),s(a,r),s(e,l),s(e,c),s(c,n),s(n,d),s(c,v),s(c,O),s(O,B),s(e,U),s(e,_),s(_,$),s($,S),s(_,A),s(_,T),s(T,L),s(e,K),s(e,y),s(y,G),s(G,de),s(y,J),s(y,Q),s(Q,fe),s(e,W),s(e,R),s(R,te),s(te,z),s(R,w),s(R,re),s(re,ne),s(e,ve),s(e,H),s(H,ie),s(ie,pe),s(H,_e),s(H,ce),s(ce,Pe),s(e,Ne),s(e,ue),s(ue,$e),s($e,Fe),s(ue,Ae),s(ue,be),s(be,Ve)},p(N,[I]){I&1&&C!==(C=N[0].operationType+"")&&M(B,C),I&1&&q!==(q=N[0].identity+"")&&M(L,q),I&1&&ee!==(ee=N[0].reason+"")&&M(fe,ee),I&7&&oe!==(oe=Re(N[0].startTime,N[1],{relative:N[2]})+"")&&M(ne,oe),I&7&&se!==(se=Re(N[0].closeTime,N[1],{relative:N[2]})+"")&&M(Pe,se),I&1&&ke!==(ke=Intl.NumberFormat("en-US").format(N[0].totalOperationCount)+"")&&M(Ve,ke)},i:D,o:D,d(N){N&&f(e)}}}function Et(o,e,a){let t,r;Ie(o,mt,c=>a(1,t=c)),Ie(o,dt,c=>a(2,r=c));let{operation:l}=e;return o.$$set=c=>{"operation"in c&&a(0,l=c.operation)},[l,t,r]}class kt extends we{constructor(e){super(),De(this,e,Et,gt,Ee,{operation:0})}}function It(o){let e=o[0].state+"",a;return{c(){a=E(e)},l(t){a=k(t,e)},m(t,r){le(t,a,r)},p(t,r){r&1&&e!==(e=t[0].state+"")&&M(a,e)},d(t){t&&f(a)}}}function ot(o){let e,a;return e=new _t({props:{top:!0,text:V("common.auto-refresh-tooltip",{interval:"5"}),$$slots:{default:[wt]},$$scope:{ctx:o}}}),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,r){Z(e,t,r),a=!0},p(t,r){const l={};r&34&&(l.$$scope={dirty:r,ctx:t}),e.$set(l)},i(t){a||(j(e.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),a=!1},d(t){x(e,t)}}}function wt(o){let e,a;return e=new vt({props:{id:"batch-operation-auto-refresh",label:V("common.auto-refresh"),labelPosition:"left",checked:o[1]}}),e.$on("change",o[2]),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,r){Z(e,t,r),a=!0},p(t,r){const l={};r&2&&(l.checked=t[1]),e.$set(l)},i(t){a||(j(e.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),a=!1},d(t){x(e,t)}}}function Dt(o){let e,a,t,r,l=V("batch.describe-page-title")+"",c,n,i,d,v,O=o[0].jobId+"",C,B,U;i=new ht({props:{type:o[3][o[0].state],$$slots:{default:[It]},$$scope:{ctx:o}}});let _=o[0].state==="Running"&&ot(o);return{c(){e=p("div"),a=p("div"),t=p("div"),r=p("h1"),c=E(l),n=b(),X(i.$$.fragment),d=b(),v=p("h2"),C=E(O),B=b(),_&&_.c(),this.h()},l($){e=u($,"DIV",{class:!0});var P=m(e);a=u(P,"DIV",{class:!0});var S=m(a);t=u(S,"DIV",{class:!0});var A=m(t);r=u(A,"H1",{class:!0});var T=m(r);c=k(T,l),T.forEach(f),n=g(A),Y(i.$$.fragment,A),A.forEach(f),d=g(S),v=u(S,"H2",{class:!0});var q=m(v);C=k(q,O),q.forEach(f),S.forEach(f),B=g(P),_&&_.l(P),P.forEach(f),this.h()},h(){h(r,"class","text-2xl"),h(t,"class","flex flex-row gap-2 max-sm:flex-col"),h(v,"class","text-sm"),h(a,"class","flex flex-col gap-2"),h(e,"class","flex items-center justify-between")},m($,P){le($,e,P),s(e,a),s(a,t),s(t,r),s(r,c),s(t,n),Z(i,t,null),s(a,d),s(a,v),s(v,C),s(e,B),_&&_.m(e,null),U=!0},p($,[P]){const S={};P&1&&(S.type=$[3][$[0].state]),P&33&&(S.$$scope={dirty:P,ctx:$}),i.$set(S),(!U||P&1)&&O!==(O=$[0].jobId+"")&&M(C,O),$[0].state==="Running"?_?(_.p($,P),P&1&&j(_,1)):(_=ot($),_.c(),j(_,1),_.m(e,null)):_&&(lt(),F(_,1,1,()=>{_=null}),rt())},i($){U||(j(i.$$.fragment,$),j(_),U=!0)},o($){F(i.$$.fragment,$),F(_),U=!1},d($){$&&f(e),x(i),_&&_.d()}}}function Pt(o,e,a){let t;Ie(o,ye,i=>a(1,t=i));let{operation:r}=e;const l=nt(),c=i=>{const{checked:d}=i.target;l("toggleAutoRefresh",{checked:d}),it(ye,t=d,t)},n={Completed:"success",Running:"primary",Failed:"danger",Unspecified:void 0};return o.$$set=i=>{"operation"in i&&a(0,r=i.operation)},[r,t,c,n]}class Vt extends we{constructor(e){super(),De(this,e,Pt,Dt,Ee,{operation:0})}}function Ct(o){let e,a,t=V("batch.results")+"",r,l,c,n,i,d=V("batch.operations-progress",{percent:o[3]})+"",v,O,C,B=Intl.NumberFormat("en-US").format(o[0].completeOperationCount)+"",U,_,$=Intl.NumberFormat("en-US").format(o[0].totalOperationCount)+"",P,S,A,T,q,L,K,y,G=V("batch.operations-succeeded",{count:o[0].completeOperationCount})+"",me,de,J,Q=V("batch.operations-failed",{count:o[0].failureOperationCount})+"",ee,fe,W,R,te,ae;return{c(){e=p("div"),a=p("p"),r=E(t),l=b(),c=p("div"),n=p("div"),i=p("span"),v=E(d),O=b(),C=p("span"),U=E(B),_=E(" / "),P=E($),S=b(),A=p("div"),T=p("div"),q=b(),L=p("div"),K=p("div"),y=p("span"),me=E(G),de=b(),J=p("span"),ee=E(Q),fe=b(),W=p("div"),R=p("div"),te=b(),ae=p("div"),this.h()},l(z){e=u(z,"DIV",{class:!0});var w=m(e);a=u(w,"P",{});var re=m(a);r=k(re,t),re.forEach(f),l=g(w),c=u(w,"DIV",{});var oe=m(c);n=u(oe,"DIV",{class:!0});var ne=m(n);i=u(ne,"SPAN",{class:!0});var ve=m(i);v=k(ve,d),ve.forEach(f),O=g(ne),C=u(ne,"SPAN",{class:!0});var H=m(C);U=k(H,B),_=k(H," / "),P=k(H,$),H.forEach(f),ne.forEach(f),S=g(oe),A=u(oe,"DIV",{class:!0});var ie=m(A);T=u(ie,"DIV",{class:!0,style:!0}),m(T).forEach(f),ie.forEach(f),oe.forEach(f),q=g(w),L=u(w,"DIV",{});var he=m(L);K=u(he,"DIV",{class:!0});var pe=m(K);y=u(pe,"SPAN",{class:!0});var _e=m(y);me=k(_e,G),_e.forEach(f),de=g(pe),J=u(pe,"SPAN",{class:!0});var ce=m(J);ee=k(ce,Q),ce.forEach(f),pe.forEach(f),fe=g(he),W=u(he,"DIV",{class:!0});var se=m(W);R=u(se,"DIV",{style:!0,class:!0}),m(R).forEach(f),te=g(se),ae=u(se,"DIV",{style:!0,class:!0}),m(ae).forEach(f),se.forEach(f),he.forEach(f),w.forEach(f),this.h()},h(){h(i,"class","text-xs font-semibold"),h(C,"class","text-xs font-semibold"),h(n,"class","flex justify-between"),h(T,"class","absolute left-0 flex h-full items-center bg-indigo-600"),ge(T,"width",o[3]+"%"),h(A,"class","relative h-2 w-full overflow-hidden rounded bg-indigo-100"),h(y,"class","text-xs font-semibold text-green-700"),h(J,"class","text-xs font-semibold"),xe(J,"text-red-700",o[2]>0),h(K,"class","flex justify-between"),ge(R,"width",o[1]+"%"),h(R,"class","absolute left-0 flex h-full items-center bg-green-200"),ge(ae,"width",o[2]+"%"),h(ae,"class","absolute right-0 flex h-full items-center justify-end bg-red-200"),h(W,"class","relative h-2 w-full overflow-hidden rounded"),h(e,"class","flex flex-col gap-4")},m(z,w){le(z,e,w),s(e,a),s(a,r),s(e,l),s(e,c),s(c,n),s(n,i),s(i,v),s(n,O),s(n,C),s(C,U),s(C,_),s(C,P),s(c,S),s(c,A),s(A,T),s(e,q),s(e,L),s(L,K),s(K,y),s(y,me),s(K,de),s(K,J),s(J,ee),s(L,fe),s(L,W),s(W,R),s(W,te),s(W,ae)},p(z,[w]){w&8&&d!==(d=V("batch.operations-progress",{percent:z[3]})+"")&&M(v,d),w&1&&B!==(B=Intl.NumberFormat("en-US").format(z[0].completeOperationCount)+"")&&M(U,B),w&1&&$!==($=Intl.NumberFormat("en-US").format(z[0].totalOperationCount)+"")&&M(P,$),w&8&&ge(T,"width",z[3]+"%"),w&1&&G!==(G=V("batch.operations-succeeded",{count:z[0].completeOperationCount})+"")&&M(me,G),w&1&&Q!==(Q=V("batch.operations-failed",{count:z[0].failureOperationCount})+"")&&M(ee,Q),w&4&&xe(J,"text-red-700",z[2]>0),w&2&&ge(R,"width",z[1]+"%"),w&4&&ge(ae,"width",z[2]+"%")},i:D,o:D,d(z){z&&f(e)}}}function zt(o,e,a){let{operation:t}=e,r,l,c;return o.$$set=n=>{"operation"in n&&a(0,t=n.operation)},o.$$.update=()=>{if(o.$$.dirty&1){const{completeOperationCount:n,failureOperationCount:i,totalOperationCount:d}=t;a(1,r=Math.round(n/d*100)),a(2,l=Math.round(i/d*100)),a(3,c=Math.round((n+i)/d*100))}},[t,r,l,c]}class Tt extends we{constructor(e){super(),De(this,e,zt,Ct,Ee,{operation:0})}}function jt(o){let e=V("batch.back-link")+"",a;return{c(){a=E(e)},l(t){a=k(t,e)},m(t,r){le(t,a,r)},p:D,d(t){t&&f(a)}}}function Ot(o){return{c:D,l:D,m:D,p:D,i:D,o:D,d:D}}function St(o){let e,a,t,r,l,c;return e=new Vt({props:{operation:o[7]}}),e.$on("toggleAutoRefresh",o[2]),t=new tt({props:{$$slots:{default:[Rt]},$$scope:{ctx:o}}}),l=new tt({props:{$$slots:{default:[Nt]},$$scope:{ctx:o}}}),{c(){X(e.$$.fragment),a=b(),X(t.$$.fragment),r=b(),X(l.$$.fragment)},l(n){Y(e.$$.fragment,n),a=g(n),Y(t.$$.fragment,n),r=g(n),Y(l.$$.fragment,n)},m(n,i){Z(e,n,i),le(n,a,i),Z(t,n,i),le(n,r,i),Z(l,n,i),c=!0},p(n,i){const d={};i&256&&(d.$$scope={dirty:i,ctx:n}),t.$set(d);const v={};i&256&&(v.$$scope={dirty:i,ctx:n}),l.$set(v)},i(n){c||(j(e.$$.fragment,n),j(t.$$.fragment,n),j(l.$$.fragment,n),c=!0)},o(n){F(e.$$.fragment,n),F(t.$$.fragment,n),F(l.$$.fragment,n),c=!1},d(n){n&&(f(a),f(r)),x(e,n),x(t,n),x(l,n)}}}function Rt(o){let e,a;return e=new kt({props:{operation:o[7]}}),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,r){Z(e,t,r),a=!0},p:D,i(t){a||(j(e.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),a=!1},d(t){x(e,t)}}}function Nt(o){let e,a;return e=new Tt({props:{operation:o[7]}}),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,r){Z(e,t,r),a=!0},p:D,i(t){a||(j(e.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),a=!1},d(t){x(e,t)}}}function Ft(o){return{c:D,l:D,m:D,p:D,i:D,o:D,d:D}}function st(o){let e,a,t={ctx:o,current:null,token:null,hasCatch:!1,pending:Ft,then:St,catch:Ot,value:7,blocks:[,,,]};return pt(o[3](),t),{c(){e=et(),t.block.c()},l(r){e=et(),t.block.l(r)},m(r,l){le(r,e,l),t.block.m(r,t.anchor=l),t.mount=()=>e.parentNode,t.anchor=e,a=!0},p(r,l){o=r,ut(t,o,l)},i(r){a||(j(t.block),a=!0)},o(r){for(let l=0;l<3;l+=1){const c=t.blocks[l];F(c)}a=!1},d(r){r&&f(e),t.block.d(r),t.token=null,t=null}}}function At(o){let e,a,t,r,l=o[1],c;t=new bt({props:{href:at({namespace:o[0]}),icon:"chevron-left",$$slots:{default:[jt]},$$scope:{ctx:o}}});let n=st(o);return{c(){e=p("div"),a=p("div"),X(t.$$.fragment),r=b(),n.c(),this.h()},l(i){e=u(i,"DIV",{class:!0});var d=m(e);a=u(d,"DIV",{class:!0});var v=m(a);Y(t.$$.fragment,v),v.forEach(f),r=g(d),n.l(d),d.forEach(f),this.h()},h(){h(a,"class","flex flex-row"),h(e,"class","flex flex-col gap-4")},m(i,d){le(i,e,d),s(e,a),Z(t,a,null),s(e,r),n.m(e,null),c=!0},p(i,[d]){const v={};d&1&&(v.href=at({namespace:i[0]})),d&256&&(v.$$scope={dirty:d,ctx:i}),t.$set(v),d&2&&Ee(l,l=i[1])?(lt(),F(n,1,1,D),rt(),n=st(i),n.c(),j(n,1),n.m(e,null)):n.p(i,d)},i(i){c||(j(t.$$.fragment,i),j(n),c=!0)},o(i){F(t.$$.fragment,i),F(n),c=!1},d(i){i&&f(e),x(t),n.d(i)}}}function yt(o,e,a){let t;Ie(o,ye,v=>a(6,t=v));let{namespace:r}=e,{jobId:l}=e,c=0,n;const i=v=>{v.detail.checked?a(1,c+=1):n&&window.clearTimeout(n)},d=()=>$t({jobId:l,namespace:r}).then(v=>(t&&v.state==="Running"&&(n=window.setTimeout(()=>{a(1,c+=1)},5e3)),v));return o.$$set=v=>{"namespace"in v&&a(0,r=v.namespace),"jobId"in v&&a(4,l=v.jobId)},[r,c,i,d,l]}class Bt extends we{constructor(e){super(),De(this,e,yt,At,Ee,{namespace:0,jobId:4})}}function Ut(o){let e,a,t,r;return e=new ft({props:{title:V("batch.describe-page-title")+" | "+o[0]}}),t=new Bt({props:{jobId:o[0],namespace:o[1]}}),{c(){X(e.$$.fragment),a=b(),X(t.$$.fragment)},l(l){Y(e.$$.fragment,l),a=g(l),Y(t.$$.fragment,l)},m(l,c){Z(e,l,c),le(l,a,c),Z(t,l,c),r=!0},p(l,[c]){const n={};c&1&&(n.title=V("batch.describe-page-title")+" | "+l[0]),e.$set(n);const i={};c&1&&(i.jobId=l[0]),c&2&&(i.namespace=l[1]),t.$set(i)},i(l){r||(j(e.$$.fragment,l),j(t.$$.fragment,l),r=!0)},o(l){F(e.$$.fragment,l),F(t.$$.fragment,l),r=!1},d(l){l&&f(a),x(e,l),x(t,l)}}}function Ht(o,e,a){let t,r,l;return Ie(o,ct,c=>a(2,l=c)),o.$$.update=()=>{o.$$.dirty&4&&a(1,t=l.params.namespace),o.$$.dirty&4&&a(0,r=l.params.jobId)},[r,t,l]}class aa extends we{constructor(e){super(),De(this,e,Ht,Ut,Ee,{})}}export{aa as component};
