import{s as F,c as k,x as _,i as M,f as P,w as v,v as K}from"../chunks/scheduler.1T9hOnFr.js";import{S as W,i as j,c as g,a as h,m as d,t as u,b as p,d as y,g as I,e as A}from"../chunks/index.cVovwi_s.js";import{e as H,u as L,o as O}from"../chunks/each.QHpLJPfe.js";import{p as Q}from"../chunks/stores.BNZb6Lr0.js";import{E as R,a as T,b as U}from"../chunks/event-summary-table.RncJkzSE.js";import{f as V}from"../chunks/events-service.lwLOTDQG.js";import{e as C}from"../chunks/filters.0bij_ejV.js";import{f as b}from"../chunks/events.Vnz1izzn.js";function N(l,t,r){const e=l.slice();return e[14]=t[r],e}function S(l){let t,r;return t=new T({props:{loading:l[1]}}),{c(){g(t.$$.fragment)},l(e){h(t.$$.fragment,e)},m(e,s){d(t,e,s),r=!0},p(e,s){const n={};s&2&&(n.loading=e[1]),t.$set(n)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){y(t,e)}}}function q(l,t){let r,e,s;return e=new U({props:{event:t[14],compact:t[0],expandAll:!0,initialItem:t[4],active:!0}}),{key:l,first:null,c(){r=_(),g(e.$$.fragment),this.h()},l(n){r=_(),h(e.$$.fragment,n),this.h()},h(){this.first=r},m(n,c){M(n,r,c),d(e,n,c),s=!0},p(n,c){t=n;const f={};c&4&&(f.event=t[14]),c&1&&(f.compact=t[0]),c&16&&(f.initialItem=t[4]),e.$set(f)},i(n){s||(u(e.$$.fragment,n),s=!0)},o(n){p(e.$$.fragment,n),s=!1},d(n){n&&P(r),y(e,n)}}}function X(l){let t=[],r=new Map,e,s,n=H(l[2]);const c=a=>`${a[14].id}-${a[14].timestamp}`;for(let a=0;a<n.length;a+=1){let o=N(l,n,a),i=c(o);r.set(i,t[a]=q(i,o))}let f=null;return n.length||(f=S(l)),{c(){for(let a=0;a<t.length;a+=1)t[a].c();e=_(),f&&f.c()},l(a){for(let o=0;o<t.length;o+=1)t[o].l(a);e=_(),f&&f.l(a)},m(a,o){for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(a,o);M(a,e,o),f&&f.m(a,o),s=!0},p(a,o){o&23&&(n=H(a[2]),I(),t=L(t,o,c,1,a,n,r,e.parentNode,O,q,e,N),A(),!n.length&&f?f.p(a,o):n.length?f&&(I(),p(f,1,1,()=>{f=null}),A()):(f=S(a),f.c(),u(f,1),f.m(e.parentNode,e)))},i(a){if(!s){for(let o=0;o<n.length;o+=1)u(t[o]);s=!0}},o(a){for(let o=0;o<t.length;o+=1)p(t[o]);s=!1},d(a){a&&P(e);for(let o=0;o<t.length;o+=1)t[o].d(a);f&&f.d(a)}}}function Y(l){let t,r;return t=new R({props:{updating:l[3],compact:l[0],$$slots:{default:[X]},$$scope:{ctx:l}}}),t.$on("expandAll",l[5]),{c(){g(t.$$.fragment)},l(e){h(t.$$.fragment,e)},m(e,s){d(t,e,s),r=!0},p(e,[s]){const n={};s&8&&(n.updating=e[3]),s&1&&(n.compact=e[0]),s&131095&&(n.$$scope={dirty:s,ctx:e}),t.$set(n)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){y(t,e)}}}function Z(l,t,r){let e,s,n,c,f,a,o,i,w;k(l,Q,m=>r(9,o=m)),k(l,b,m=>r(10,i=m)),k(l,C,m=>r(11,w=m));let{compact:E=!1}=t,$=!1;const z=()=>{v(b,i=[],i),r(1,$=!0)},B=async(m,G,J)=>{i.length||(z(),v(b,i=await V({namespace:m,workflowId:G,runId:J}),i),r(1,$=!1))};function D(m){v(C,w=m.detail.expanded,w)}return l.$$set=m=>{"compact"in m&&r(0,E=m.compact)},l.$$.update=()=>{l.$$.dirty&512&&r(8,{namespace:e,workflow:s,run:n}=o.params,e,(r(7,s),r(9,o)),(r(6,n),r(9,o))),l.$$.dirty&448&&B(e,s,n),l.$$.dirty&1024&&r(4,c=i==null?void 0:i[0]),l.$$.dirty&1024&&r(3,f=!i.length),l.$$.dirty&1536&&r(2,a=i.filter(m=>m.id===o.params.id))},[E,$,a,f,c,D,n,s,e,o,i]}class x extends W{constructor(t){super(),j(this,t,Z,Y,F,{compact:0})}}function ee(l){let t,r;return t=new x({}),{c(){g(t.$$.fragment)},l(e){h(t.$$.fragment,e)},m(e,s){d(t,e,s),r=!0},p:K,i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){y(t,e)}}}class ie extends W{constructor(t){super(),j(this,t,null,ee,F,{})}}export{ie as component};
