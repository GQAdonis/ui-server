import{S as K,i as M,s as O,l as W,f as w,u as v,w as R,x as h,d as b,r as V,e as q,t as N,k as F,j as g,c as T,a as C,g as H,n as D,m as E,J as S,o as A,v as j,b as P,D as X,E as Y,ad as Q,F as Z,ae as x,Q as y,ag as ee}from"../../../../chunks/vendor-aac54a92.js";import{b as U}from"../../../../chunks/workflow-status-402004a6.js";import{W as te,a as le,b as ae,c as re}from"../../../../chunks/_workflows-loading-6e4c55d7.js";import{E as oe}from"../../../../chunks/empty-state-f8507a33.js";import{C as z}from"../../../../chunks/code-block-cf5a23f3.js";import"../../../../chunks/route-for-api-31cf896b.js";import"../../../../chunks/notifications-389b12bb.js";import"../../../../chunks/format-date-9900ebeb.js";import"../../../../chunks/namespace-99603d17.js";import"../../../../chunks/stores-68dc7257.js";import"../../../../chunks/route-for-c019a53c.js";import"../../../../chunks/option-3fadd152.js";import"../../../../chunks/filter-select-d8ae56cd.js";import"../../../../chunks/navigation-51f4a605.js";import"../../../../chunks/singletons-12a22614.js";import"../../../../chunks/append-query-parameters-b8619cc0.js";function B(n){n[8]=n[9].workflows}function ne(n){let e,l,t,a,i,o,f,r,u,k,d,m,c,p;f=new z({props:{content:"tctl --namespace default namespace update --has enabled",language:"text"}});let _=!n[1]&&G();return{c(){e=q("h2"),l=N("This namespace is currently not enabled for archival."),t=F(),a=q("p"),i=N("Run this command to enable Archival for Event Histories:"),o=F(),g(f.$$.fragment),r=F(),_&&_.c(),u=F(),k=q("p"),d=N("For more details please check out "),m=q("a"),c=N("Archival Docs"),this.h()},l(s){e=T(s,"H2",{class:!0});var $=C(e);l=H($,"This namespace is currently not enabled for archival."),$.forEach(b),t=D(s),a=T(s,"P",{});var J=C(a);i=H(J,"Run this command to enable Archival for Event Histories:"),J.forEach(b),o=D(s),E(f.$$.fragment,s),r=D(s),_&&_.l(s),u=D(s),k=T(s,"P",{});var I=C(k);d=H(I,"For more details please check out "),m=T(I,"A",{class:!0,href:!0});var L=C(m);c=H(L,"Archival Docs"),L.forEach(b),I.forEach(b),this.h()},h(){P(e,"class","text-2xl"),P(m,"class","text-blue-700 underline"),P(m,"href","https://docs.temporal.io/docs/server/archive-data/")},m(s,$){w(s,e,$),S(e,l),w(s,t,$),w(s,a,$),S(a,i),w(s,o,$),A(f,s,$),w(s,r,$),_&&_.m(s,$),w(s,u,$),w(s,k,$),S(k,d),S(k,m),S(m,c),p=!0},p(s,$){s[1]?_&&(V(),v(_,1,1,()=>{_=null}),R()):_?$&2&&h(_,1):(_=G(),_.c(),h(_,1),_.m(u.parentNode,u))},i(s){p||(h(f.$$.fragment,s),h(_),p=!0)},o(s){v(f.$$.fragment,s),v(_),p=!1},d(s){s&&b(e),s&&b(t),s&&b(a),s&&b(o),j(f,s),s&&b(r),_&&_.d(s),s&&b(u),s&&b(k)}}}function ie(n){let e,l,t,a,i,o,f,r,u;function k(c){n[7](c)}let d={};n[2]!==void 0&&(d.timeFormat=n[2]),a=new te({props:d}),X.push(()=>Y(a,"timeFormat",k));let m={ctx:n,current:null,token:null,hasCatch:!1,pending:pe,then:ce,catch:se,value:9,blocks:[,,,]};return Q(r=n[3],m),{c(){e=q("h2"),l=N("Archived Workflows"),t=F(),g(a.$$.fragment),o=F(),f=W(),m.block.c(),this.h()},l(c){e=T(c,"H2",{class:!0});var p=C(e);l=H(p,"Archived Workflows"),p.forEach(b),t=D(c),E(a.$$.fragment,c),o=D(c),f=W(),m.block.l(c),this.h()},h(){P(e,"class","text-2xl")},m(c,p){w(c,e,p),S(e,l),w(c,t,p),A(a,c,p),w(c,o,p),w(c,f,p),m.block.m(c,m.anchor=p),m.mount=()=>f.parentNode,m.anchor=f,u=!0},p(c,p){n=c;const _={};!i&&p&4&&(i=!0,_.timeFormat=n[2],Z(()=>i=!1)),a.$set(_),m.ctx=n,p&8&&r!==(r=n[3])&&Q(r,m)||x(m,n,p)},i(c){u||(h(a.$$.fragment,c),h(m.block),u=!0)},o(c){v(a.$$.fragment,c);for(let p=0;p<3;p+=1){const _=m.blocks[p];v(_)}u=!1},d(c){c&&b(e),c&&b(t),j(a,c),c&&b(o),c&&b(f),m.block.d(c),m.token=null,m=null}}}function G(n){let e,l,t,a,i;return a=new z({props:{content:"tctl --namespace default namespace update -vas enabled",language:"text"}}),{c(){e=q("p"),l=N("To enable Visibility Archival:"),t=F(),g(a.$$.fragment)},l(o){e=T(o,"P",{});var f=C(e);l=H(f,"To enable Visibility Archival:"),f.forEach(b),t=D(o),E(a.$$.fragment,o)},m(o,f){w(o,e,f),S(e,l),w(o,t,f),A(a,o,f),i=!0},i(o){i||(h(a.$$.fragment,o),i=!0)},o(o){v(a.$$.fragment,o),i=!1},d(o){o&&b(e),o&&b(t),j(a,o)}}}function se(n){return{c:y,l:y,m:y,p:y,i:y,o:y,d:y}}function ce(n){B(n);let e,l,t,a;const i=[ue,fe],o=[];function f(r,u){return r[8].length?0:1}return e=f(n),l=o[e]=i[e](n),{c(){l.c(),t=W()},l(r){l.l(r),t=W()},m(r,u){o[e].m(r,u),w(r,t,u),a=!0},p(r,u){B(r);let k=e;e=f(r),e===k?o[e].p(r,u):(V(),v(o[k],1,1,()=>{o[k]=null}),R(),l=o[e],l?l.p(r,u):(l=o[e]=i[e](r),l.c()),h(l,1),l.m(t.parentNode,t))},i(r){a||(h(l),a=!0)},o(r){v(l),a=!1},d(r){o[e].d(r),r&&b(t)}}}function fe(n){let e,l;return e=new oe({props:{title:"No Workflows Found",content:"If you have filters applied, try adjusting them."}}),{c(){g(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,a){A(e,t,a),l=!0},p:y,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){j(e,t)}}}function ue(n){let e,l;return e=new ae({props:{$$slots:{default:[_e]},$$scope:{ctx:n}}}),{c(){g(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,a){A(e,t,a),l=!0},p(t,a){const i={};a&2060&&(i.$$scope={dirty:a,ctx:t}),e.$set(i)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){j(e,t)}}}function me(n){let e,l;return e=new re({props:{workflow:n[10],timeFormat:n[2]}}),{c(){g(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,a){A(e,t,a),l=!0},p(t,a){const i={};a&1024&&(i.workflow=t[10]),a&4&&(i.timeFormat=t[2]),e.$set(i)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){j(e,t)}}}function _e(n){let e,l;return e=new ee({props:{items:n[8],$$slots:{default:[me,({item:t})=>({10:t}),({item:t})=>t?1024:0]},$$scope:{ctx:n}}}),{c(){g(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,a){A(e,t,a),l=!0},p(t,a){const i={};a&8&&(i.items=t[8]),a&3076&&(i.$$scope={dirty:a,ctx:t}),e.$set(i)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){j(e,t)}}}function pe(n){let e,l;return e=new le({}),{c(){g(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,a){A(e,t,a),l=!0},p:y,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){j(e,t)}}}function ke(n){let e,l,t,a;const i=[ie,ne],o=[];function f(r,u){return r[0]?0:1}return e=f(n),l=o[e]=i[e](n),{c(){l.c(),t=W()},l(r){l.l(r),t=W()},m(r,u){o[e].m(r,u),w(r,t,u),a=!0},p(r,[u]){let k=e;e=f(r),e===k?o[e].p(r,u):(V(),v(o[k],1,1,()=>{o[k]=null}),R(),l=o[e],l?l.p(r,u):(l=o[e]=i[e](r),l.c()),h(l,1),l.m(t.parentNode,t))},i(r){a||(h(l),a=!0)},o(r){v(l),a=!1},d(r){o[e].d(r),r&&b(t)}}}async function Te({page:n,fetch:e,stuff:l}){var t,a;n.query.has("time-range")||n.query.set("time-range","24 hours");const i=n.params.namespace,o=n.query.get("workflow-id"),f=n.query.get("workflow-type"),r=n.query.get("time-range"),u=n.query.get("status"),k={workflowId:o,workflowType:f,closeTime:r,executionStatus:u},m=l.namespaces.find(s=>s.namespaceInfo.name===i),c=((t=m==null?void 0:m.config)===null||t===void 0?void 0:t.historyArchivalState)==="Enabled",p=((a=m==null?void 0:m.config)===null||a===void 0?void 0:a.visibilityArchivalState)==="Enabled";return{props:{initialData:c?await U(i,k,e):Promise.resolve(null),namespace:i,parameters:k,archivalEnabled:c,visibilityArchivalEnabled:p}}}function be(n,e,l){let{namespace:t}=e,{initialData:a}=e,{parameters:i}=e,{archivalEnabled:o=!1}=e,{visibilityArchivalEnabled:f=!1}=e,r="UTC",u=a;function k(d){r=d,l(2,r)}return n.$$set=d=>{"namespace"in d&&l(4,t=d.namespace),"initialData"in d&&l(5,a=d.initialData),"parameters"in d&&l(6,i=d.parameters),"archivalEnabled"in d&&l(0,o=d.archivalEnabled),"visibilityArchivalEnabled"in d&&l(1,f=d.visibilityArchivalEnabled)},n.$$.update=()=>{n.$$.dirty&81&&o&&l(3,u=U(t,i))},[o,f,r,u,t,a,i,k]}class Ce extends K{constructor(e){super();M(this,e,be,ke,O,{namespace:4,initialData:5,parameters:6,archivalEnabled:0,visibilityArchivalEnabled:1})}}export{Ce as default,Te as load};
