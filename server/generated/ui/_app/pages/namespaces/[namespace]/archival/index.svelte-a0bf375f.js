import{S as K,i as M,s as O,l as W,f as w,u as v,w as R,x as h,d as k,r as V,e as q,t as N,k as F,j as g,c as T,a as C,g as H,n as D,m as E,J as S,o as A,v as j,b as P,D as X,E as Y,ad as Q,F as Z,ae as x,Q as y,ag as ee}from"../../../../chunks/vendor-b93e428e.js";import{b as U}from"../../../../chunks/workflow-status-d9ed7bd5.js";import{W as te,a as le,b as re,c as ae}from"../../../../chunks/_workflows-loading-2fbd6ff1.js";import{E as oe}from"../../../../chunks/empty-state-df4c442a.js";import{C as z}from"../../../../chunks/code-block-9bb15017.js";import"../../../../chunks/route-for-api-897023e4.js";import"../../../../chunks/notifications-f504753b.js";import"../../../../chunks/format-date-a36da880.js";import"../../../../chunks/namespace-331fae19.js";import"../../../../chunks/stores-668dfc14.js";import"../../../../chunks/route-for-c019a53c.js";import"../../../../chunks/option-e05943b7.js";import"../../../../chunks/filter-select-5adef9b7.js";import"../../../../chunks/navigation-51f4a605.js";import"../../../../chunks/singletons-12a22614.js";import"../../../../chunks/append-query-parameters-b8619cc0.js";function B(n){n[8]=n[9].workflows}function ne(n){let e,l,t,r,i,o,f,a,u,b,d,m,c,p;f=new z({props:{content:"tctl --namespace default namespace update --has enabled",language:"text"}});let _=!n[1]&&G();return{c(){e=q("h2"),l=N("This namespace is currently not enabled for archival."),t=F(),r=q("p"),i=N("Run this command to enable Archival for Event Histories:"),o=F(),g(f.$$.fragment),a=F(),_&&_.c(),u=F(),b=q("p"),d=N("For more details please check out "),m=q("a"),c=N("Archival Docs"),this.h()},l(s){e=T(s,"H2",{class:!0});var $=C(e);l=H($,"This namespace is currently not enabled for archival."),$.forEach(k),t=D(s),r=T(s,"P",{});var J=C(r);i=H(J,"Run this command to enable Archival for Event Histories:"),J.forEach(k),o=D(s),E(f.$$.fragment,s),a=D(s),_&&_.l(s),u=D(s),b=T(s,"P",{});var I=C(b);d=H(I,"For more details please check out "),m=T(I,"A",{class:!0,href:!0});var L=C(m);c=H(L,"Archival Docs"),L.forEach(k),I.forEach(k),this.h()},h(){P(e,"class","text-2xl"),P(m,"class","text-blue-700 underline"),P(m,"href","https://docs.temporal.io/docs/server/archive-data/")},m(s,$){w(s,e,$),S(e,l),w(s,t,$),w(s,r,$),S(r,i),w(s,o,$),A(f,s,$),w(s,a,$),_&&_.m(s,$),w(s,u,$),w(s,b,$),S(b,d),S(b,m),S(m,c),p=!0},p(s,$){s[1]?_&&(V(),v(_,1,1,()=>{_=null}),R()):_?$&2&&h(_,1):(_=G(),_.c(),h(_,1),_.m(u.parentNode,u))},i(s){p||(h(f.$$.fragment,s),h(_),p=!0)},o(s){v(f.$$.fragment,s),v(_),p=!1},d(s){s&&k(e),s&&k(t),s&&k(r),s&&k(o),j(f,s),s&&k(a),_&&_.d(s),s&&k(u),s&&k(b)}}}function ie(n){let e,l,t,r,i,o,f,a,u;function b(c){n[7](c)}let d={};n[2]!==void 0&&(d.timeFormat=n[2]),r=new te({props:d}),X.push(()=>Y(r,"timeFormat",b));let m={ctx:n,current:null,token:null,hasCatch:!1,pending:pe,then:ce,catch:se,value:9,blocks:[,,,]};return Q(a=n[3],m),{c(){e=q("h2"),l=N("Archived Workflows"),t=F(),g(r.$$.fragment),o=F(),f=W(),m.block.c(),this.h()},l(c){e=T(c,"H2",{class:!0});var p=C(e);l=H(p,"Archived Workflows"),p.forEach(k),t=D(c),E(r.$$.fragment,c),o=D(c),f=W(),m.block.l(c),this.h()},h(){P(e,"class","text-2xl")},m(c,p){w(c,e,p),S(e,l),w(c,t,p),A(r,c,p),w(c,o,p),w(c,f,p),m.block.m(c,m.anchor=p),m.mount=()=>f.parentNode,m.anchor=f,u=!0},p(c,p){n=c;const _={};!i&&p&4&&(i=!0,_.timeFormat=n[2],Z(()=>i=!1)),r.$set(_),m.ctx=n,p&8&&a!==(a=n[3])&&Q(a,m)||x(m,n,p)},i(c){u||(h(r.$$.fragment,c),h(m.block),u=!0)},o(c){v(r.$$.fragment,c);for(let p=0;p<3;p+=1){const _=m.blocks[p];v(_)}u=!1},d(c){c&&k(e),c&&k(t),j(r,c),c&&k(o),c&&k(f),m.block.d(c),m.token=null,m=null}}}function G(n){let e,l,t,r,i;return r=new z({props:{content:"tctl --namespace default namespace update -vas enabled",language:"text"}}),{c(){e=q("p"),l=N("To enable Visibility Archival:"),t=F(),g(r.$$.fragment)},l(o){e=T(o,"P",{});var f=C(e);l=H(f,"To enable Visibility Archival:"),f.forEach(k),t=D(o),E(r.$$.fragment,o)},m(o,f){w(o,e,f),S(e,l),w(o,t,f),A(r,o,f),i=!0},i(o){i||(h(r.$$.fragment,o),i=!0)},o(o){v(r.$$.fragment,o),i=!1},d(o){o&&k(e),o&&k(t),j(r,o)}}}function se(n){return{c:y,l:y,m:y,p:y,i:y,o:y,d:y}}function ce(n){B(n);let e,l,t,r;const i=[ue,fe],o=[];function f(a,u){return a[8].length?0:1}return e=f(n),l=o[e]=i[e](n),{c(){l.c(),t=W()},l(a){l.l(a),t=W()},m(a,u){o[e].m(a,u),w(a,t,u),r=!0},p(a,u){B(a);let b=e;e=f(a),e===b?o[e].p(a,u):(V(),v(o[b],1,1,()=>{o[b]=null}),R(),l=o[e],l?l.p(a,u):(l=o[e]=i[e](a),l.c()),h(l,1),l.m(t.parentNode,t))},i(a){r||(h(l),r=!0)},o(a){v(l),r=!1},d(a){o[e].d(a),a&&k(t)}}}function fe(n){let e,l;return e=new oe({props:{title:"No Workflows Found",content:"If you have filters applied, try adjusting them."}}),{c(){g(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},p:y,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){j(e,t)}}}function ue(n){let e,l;return e=new re({props:{$$slots:{default:[_e]},$$scope:{ctx:n}}}),{c(){g(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},p(t,r){const i={};r&2060&&(i.$$scope={dirty:r,ctx:t}),e.$set(i)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){j(e,t)}}}function me(n){let e,l;return e=new ae({props:{workflow:n[10],timeFormat:n[2]}}),{c(){g(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},p(t,r){const i={};r&1024&&(i.workflow=t[10]),r&4&&(i.timeFormat=t[2]),e.$set(i)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){j(e,t)}}}function _e(n){let e,l;return e=new ee({props:{items:n[8],$$slots:{default:[me,({item:t})=>({10:t}),({item:t})=>t?1024:0]},$$scope:{ctx:n}}}),{c(){g(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},p(t,r){const i={};r&8&&(i.items=t[8]),r&3076&&(i.$$scope={dirty:r,ctx:t}),e.$set(i)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){j(e,t)}}}function pe(n){let e,l;return e=new le({}),{c(){g(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},p:y,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){j(e,t)}}}function be(n){let e,l,t,r;const i=[ie,ne],o=[];function f(a,u){return a[0]?0:1}return e=f(n),l=o[e]=i[e](n),{c(){l.c(),t=W()},l(a){l.l(a),t=W()},m(a,u){o[e].m(a,u),w(a,t,u),r=!0},p(a,[u]){let b=e;e=f(a),e===b?o[e].p(a,u):(V(),v(o[b],1,1,()=>{o[b]=null}),R(),l=o[e],l?l.p(a,u):(l=o[e]=i[e](a),l.c()),h(l,1),l.m(t.parentNode,t))},i(a){r||(h(l),r=!0)},o(a){v(l),r=!1},d(a){o[e].d(a),a&&k(t)}}}async function Te({page:n,fetch:e,stuff:l}){var t,r;n.query.has("time-range")||n.query.set("time-range","24 hours");const i=n.params.namespace,o=n.query.get("workflow-id"),f=n.query.get("workflow-type"),a=n.query.get("time-range"),u=n.query.get("status"),b={workflowId:o,workflowType:f,closeTime:a,executionStatus:u},m=l.namespaces.find(s=>s.namespaceInfo.name===i),c=((t=m==null?void 0:m.config)===null||t===void 0?void 0:t.historyArchivalState)==="Enabled",p=((r=m==null?void 0:m.config)===null||r===void 0?void 0:r.visibilityArchivalState)==="Enabled";return{props:{initialData:c?await U(i,b,e):Promise.resolve(null),namespace:i,parameters:b,archivalEnabled:c,visibilityArchivalEnabled:p}}}function ke(n,e,l){let{namespace:t}=e,{initialData:r}=e,{parameters:i}=e,{archivalEnabled:o=!1}=e,{visibilityArchivalEnabled:f=!1}=e,a="UTC",u=r;function b(d){a=d,l(2,a)}return n.$$set=d=>{"namespace"in d&&l(4,t=d.namespace),"initialData"in d&&l(5,r=d.initialData),"parameters"in d&&l(6,i=d.parameters),"archivalEnabled"in d&&l(0,o=d.archivalEnabled),"visibilityArchivalEnabled"in d&&l(1,f=d.visibilityArchivalEnabled)},n.$$.update=()=>{n.$$.dirty&81&&o&&l(3,u=U(t,i))},[o,f,a,u,t,r,i,b]}class Ce extends K{constructor(e){super();M(this,e,ke,be,O,{namespace:4,initialData:5,parameters:6,archivalEnabled:0,visibilityArchivalEnabled:1})}}export{Ce as default,Te as load};
