import{r as c,a as f}from"./route-for-api-31cf896b.js";import{ah as S,ai as E,S as C,i as q,s as A,e as W,t as b,c as P,a as K,g as j,d as m,b as w,a4 as y,f as F,J as D,h as O,Q as k}from"./vendor-aac54a92.js";const x=t=>{var l,d;const e=t.workflowExecutionInfo.type.name,n=t.workflowExecutionInfo.execution.workflowId,r=t.workflowExecutionInfo.execution.runId,s=String(t.workflowExecutionInfo.startTime),o=String(t.workflowExecutionInfo.closeTime),i=t.workflowExecutionInfo.status,u=t.workflowExecutionInfo.historyLength,a=`/workflows/${n}/${r}`,_=(d=(l=t==null?void 0:t.executionConfig)==null?void 0:l.taskQueue)==null?void 0:d.name,I=t.pendingActivities||[];return{name:e,id:n,runId:r,startTime:s,endTime:o,status:i,historyEvents:u,url:a,taskQueue:_,pendingActivities:I}},h=t=>(t.executions||[]).map(e=>x({workflowExecutionInfo:e})),p=["years","months","weeks","days","hours","minutes","seconds"],Y=["10 minutes","60 minutes","3 hours","24 hours","3 days","7 days","30 days","90 days"],g=new RegExp(`(\\d+)\\s(${p.join("|")})`),Q=t=>{if(typeof t!="string")return!1;for(const e of p)if(e===t)return!0;return!1},N=t=>{if(t===null||typeof t!="object")return!1;for(const e of Object.keys(t))if(!Q(e))return!1;return!0},$=t=>{if(t===null||typeof t!="string")return!1;const e=t.match(g);if(!e)return!1;const[,n,r]=e;return!!n&&!!r},R=t=>{const[,e,n]=t.match(g);return{[n]:parseInt(e,10)}},v=t=>{const e=typeof t=="string"?R(t):t;return S(E(new Date,e))},L={workflowId:"WorkflowId",workflowType:"WorkflowType",timeRange:"StartTime",executionStatus:"ExecutionStatus",closeTime:"CloseTime"},B=["workflowId","workflowType","timeRange","executionStatus","closeTime"],J=t=>!(t===null||t===void 0||typeof t=="string"&&t==="undefined"),V=t=>{if(typeof t!="string")return!1;for(const e of B)if(e===t)return!0;return!1},z=(t,e)=>{const n=L[t];return N(e)||$(e)?`${n} > "${v(e)}"`:`${n}="${e}"`},G=t=>Object.entries(t).map(([e,n])=>{if(V(e)&&J(n))return z(e,n)}).filter(Boolean),T=t=>G(t).join(" and "),Z=async(t,e,n=fetch)=>{var i;const r=T(e),{executions:s,nextPageToken:o}=(i=await c(f("workflows",{namespace:t}),{params:{query:r},request:n}))!=null?i:{executions:[],nextPageToken:""};return{workflows:h({executions:s}),nextPageToken:String(o)}},tt=async(t,e,n=fetch)=>{var i;const r=T(e),{executions:s,nextPageToken:o}=(i=await c(f("archive",{namespace:t}),{params:{query:r},request:n}))!=null?i:{executions:[],nextPageToken:""};return{workflows:h({executions:s}),nextPageToken:String(o)}};async function et(t,e=fetch){return c(f("workflow",t),{request:e}).then(x)}function H(t){let e,n,r;return{c(){e=W("span"),n=b(t[0]),this.h()},l(s){e=P(s,"SPAN",{class:!0});var o=K(e);n=j(o,t[0]),o.forEach(m),this.h()},h(){w(e,"class",r=""+(y(`${t[1]} rounded-md text-center px-2 text-sm`)+" svelte-xqpq4y"))},m(s,o){F(s,e,o),D(e,n)},p(s,[o]){o&1&&O(n,s[0]),o&2&&r!==(r=""+(y(`${s[1]} rounded-md text-center px-2 text-sm`)+" svelte-xqpq4y"))&&w(e,"class",r)},i:k,o:k,d(s){s&&m(e)}}}function M(t,e,n){let r,s,{status:o}=e;const i={Running:"Running",TimedOut:"Timed Out",Completed:"Completed",Failed:"Failed",ContinuedAsNew:"Continued as New",Canceled:"Canceled",Terminated:"Terminated"},u={Running:"blue",TimedOut:"red",Completed:"green",Failed:"red",ContinuedAsNew:"indigo",Canceled:"yellow",Terminated:"pink"};return t.$$set=a=>{"status"in a&&n(2,o=a.status)},t.$$.update=()=>{t.$$.dirty&4&&n(1,r=u[o]),t.$$.dirty&4&&n(0,s=i[o])},[s,r,o]}class nt extends C{constructor(e){super();q(this,e,M,H,A,{status:2})}}export{nt as W,et as a,tt as b,Y as d,Z as f};
